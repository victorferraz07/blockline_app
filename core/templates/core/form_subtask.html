{% extends 'core/base.html' %}
{% load static %}

{% block title %}Nova Subtarefa{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <!-- Header -->
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">â• Nova Subtarefa</h1>
        <p class="text-gray-600">Criar subtarefa para: <strong>{{ parent_task.titulo }}</strong></p>
    </div>

    <!-- Info da Tarefa Pai -->
    <div class="bg-indigo-50 border-l-4 border-indigo-500 rounded p-4 mb-6">
        <div class="flex items-start gap-3">
            <span class="text-2xl">ğŸ“Œ</span>
            <div class="flex-1">
                <h3 class="font-semibold text-indigo-900">Tarefa Pai</h3>
                <p class="text-sm text-indigo-700 mt-1">{{ parent_task.titulo }}</p>
                <div class="flex gap-3 text-xs text-indigo-600 mt-2">
                    <span>ğŸ“ {{ parent_task.project.nome }}</span>
                    {% if parent_task.milestone %}
                        <span>ğŸ¯ {{ parent_task.milestone.nome }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- FormulÃ¡rio -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <form method="post" class="space-y-6">
            {% csrf_token %}

            <!-- TÃ­tulo -->
            <div>
                <label for="titulo" class="block text-sm font-medium text-gray-700 mb-2">
                    TÃ­tulo da Subtarefa <span class="text-red-500">*</span>
                </label>
                <input
                    type="text"
                    name="titulo"
                    id="titulo"
                    required
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    placeholder="Ex: Criar layout da pÃ¡gina inicial"
                    autofocus
                >
            </div>

            <!-- DescriÃ§Ã£o -->
            <div>
                <label for="descricao" class="block text-sm font-medium text-gray-700 mb-2">
                    DescriÃ§Ã£o
                </label>
                <textarea
                    name="descricao"
                    id="descricao"
                    rows="4"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    placeholder="Descreva os detalhes da subtarefa..."
                ></textarea>
            </div>

            <!-- Info -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-start gap-2">
                    <span class="text-blue-600">â„¹ï¸</span>
                    <div class="text-sm text-blue-800">
                        <p class="font-medium mb-1">InformaÃ§Ãµes sobre Subtarefas:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>A subtarefa serÃ¡ automaticamente vinculada ao projeto e milestone da tarefa pai</li>
                            <li>VocÃª poderÃ¡ editar datas, prioridade e outros detalhes depois na pÃ¡gina de ediÃ§Ã£o</li>
                            <li>O progresso da tarefa pai considera o status das subtarefas</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- BotÃµes -->
            <div class="flex gap-3 pt-4 border-t border-gray-200">
                <button
                    type="submit"
                    class="px-6 py-2 bg-indigo-600 text-white rounded-md font-medium hover:bg-indigo-700 transition-colors"
                >
                    â• Criar Subtarefa
                </button>
                <a
                    href="{% url 'task_detail' parent_task.id %}"
                    class="px-6 py-2 bg-gray-100 text-gray-700 rounded-md font-medium hover:bg-gray-200 transition-colors"
                >
                    âŒ Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
